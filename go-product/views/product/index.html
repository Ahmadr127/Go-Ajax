<!DOCTYPE html>
<html lang="en">
    <head>
        <!-- Required meta tags -->
        <meta charset="utf-8" />
        <meta
            name="viewport"
            content="width=device-width, initial-scale=1, shrink-to-fit=no"
        />

        <!-- Bootstrap CSS -->
        <link
            rel="stylesheet"
            href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.3.0/font/bootstrap-icons.css"
        />
        <link
            rel="stylesheet"
            href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css"
            integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm"
            crossorigin="anonymous"
        />
        <style>
            /* Your custom styles here */
            body {
                padding-top: 100px;
            }
            .navbar {
                background: rgb(245, 62, 45);
                background: radial-gradient(
                    circle,
                    rgba(245, 62, 45, 1) 0%,
                    rgba(254, 100, 51, 1) 100%
                );
                height: 100px;
            }

            h2 {
                padding: 50px 50px 50px;
            }

            h2 span {
                background: rgb(245, 62, 45);
                background: radial-gradient(
                    circle,
                    rgba(245, 62, 45, 1) 0%,
                    rgba(254, 100, 51, 1) 100%
                );
                padding: 2px 10px 2px;
                border-radius: 5px;
                color: white;
                i {
                    font-size: 40px;
                    padding-bottom: 10px;
                }
            }
            table {
                box-shadow: rgba(0, 0, 0, 0.07) 0px 1px 1px,
                    rgba(0, 0, 0, 0.07) 0px 2px 2px,
                    rgba(0, 0, 0, 0.07) 0px 4px 4px,
                    rgba(0, 0, 0, 0.07) 0px 8px 8px,
                    rgba(0, 0, 0, 0.07) 0px 16px 16px;
            }

            .logo {
                height: 40px; /* Adjust logo height */
            }

            .navbar-brand {
                margin-right: auto; /* Align brand to the right */
            }

            .searchbox {
                width: 800px !important; /* Adjust search box width */
            }

            .cart-logo {
                height: 40px; /* Adjust cart logo height */
            }

            .container-fluid a {
                font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif !important;
                font-size: 2rem !important;
                color: white !important;
            }

            .container-fluid i {
                font-size: 3rem;
                color: white;
                margin: 5px;
                padding-bottom: 20px;
            }
            .container {
                height: 700px;
            }
            footer {
                margin-bottom: 0 !important;
                background: rgb(245, 62, 45);
                background: radial-gradient(
                    circle,
                    rgba(245, 62, 45, 1) 0%,
                    rgba(254, 100, 51, 1) 100%
                );
                .kaki {
                    padding: 1rem;
                }
                .kaki p {
                    margin-bottom: 0;
                    color: white;
                    text-align: center;
                }
                .kaki i {
                    font-size: 30px;
                }
            }
            .add-product {
                padding: 10px 80px 10px;
                background: rgb(245, 62, 45);
                background: radial-gradient(
                    circle,
                    rgba(245, 62, 45, 1) 0%,
                    rgba(254, 100, 51, 1) 100%
                );
                color: white;
                font-weight: 700;
            }
            .card {
                box-shadow: rgba(6, 24, 44, 0.4) 0px 0px 0px 2px,
                    rgba(6, 24, 44, 0.65) 0px 4px 6px -1px,
                    rgba(255, 255, 255, 0.08) 0px 1px 0px inset;
            }
        </style>

        <title>Control Product</title>
    </head>
    <body>
        <nav class="navbar fixed-top">
            <div class="container-fluid mx-4">
                <i class="bi bi-bag-fill"></i>
                <a class="navbar-brand">Ahmad Store</a>
                <form class="searchbox mx-auto" id="filter-form">
                    <input
                        id="filter-nama"
                        class="form-control"
                        type="search"
                        placeholder="Cari Product"
                        aria-label="Search"
                    />
                </form>
                <i
                    class="bi bi-cart-fill"
                    style="font-size: 35px !important"
                ></i>
            </div>
        </nav>

        <div
            class="modal fade"
            id="modalProduct"
            tabindex="-1"
            role="dialog"
            aria-labelledby="modalProductLabel"
            aria-hidden="true"
        ></div>

        <div class="container">
            <h2 class="text-center">
                Mengkontrol Data Produk Yang Ada Di
                <span>Ahmad Store</span>
            </h2>

            <button type="button" class="btn add-product float-right my-4">
                Tambah Data
            </button>

            <table class="table mt-3 table-bordered table-hover">
                <thead
                    class="text-white"
                    style="
                        background: rgb(245, 62, 45) !important;
                        background: radial-gradient(
                            circle,
                            rgba(245, 62, 45, 1) 0%,
                            rgba(254, 100, 51, 1) 100%
                        ) !important;
                    "
                >
                    <th>#</th>
                    <th>Nama Product</th>
                    <th>Harga</th>
                    <th>Jumlah Terjual</th>
                    <th>Kota</th>
                    <th>URL</th>
                    <th>Aksi</th>
                </thead>
                <tbody>
                    {{ .data }}
                </tbody>
            </table>
        </div>

        <footer>
            <div class="kaki">
                <p>Credit by Ahmad Rifai</p>
                <p>
                    Follow me on
                    <span><i class="bi bi-github"></i></span>
                    github.com/Ahmadr127
                </p>
            </div>
        </footer>

        <!-- Optional JavaScript -->
        <!-- jQuery first, then Popper.js, then Bootstrap JS -->
        <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
        <script
            src="https://cdn.jsdelivr.net/npm/popper.js@1.12.9/dist/umd/popper.min.js"
            integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q"
            crossorigin="anonymous"
        ></script>
        <script
            src="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/js/bootstrap.min.js"
            integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl"
            crossorigin="anonymous"
        ></script>

        <!-- Optional JavaScript -->
        <!-- jQuery first, then Popper.js, then Bootstrap JS -->
        <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
        <script
            src="https://cdn.jsdelivr.net/npm/popper.js@1.12.9/dist/umd/popper.min.js"
            integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q"
            crossorigin="anonymous"
        ></script>
        <script
            src="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/js/bootstrap.min.js"
            integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl"
            crossorigin="anonymous"
        ></script>

        <script>
            var site_url = "http://localhost:8000/";
        
            $(document).ready(function () {
                // Menampilkan form tambah data
                $(".add-product").click(function () {
                    $.get(site_url + "product/get_form", function (html) {
                        $("#modalProduct").html(html).modal("show");
                    });
                });
        
                // Menampilkan form edit data
                $(document).on("click", ".edit-product", function () {
                    var id = $(this).data("id");
                    $.get(site_url + "product/get_form?id=" + id, function (html) {
                        $("#modalProduct").html(html).modal("show");
                    });
                });
        
                // Menghapus data product
                $(document).on("click", ".delete-product", function () {
                    var id = $(this).data("id");
                    var confirmDelete = confirm("Apakah Anda yakin ingin menghapus data?");
                    if (confirmDelete) {
                        $.post(
                            site_url + "product/delete",
                            { id: id },
                            function (response) {
                                alert(response.message);
                                $("tbody").html(response.data);
                            },
                            "JSON"
                        );
                    }
                });
        
                // Submit form product (menambah atau mengubah data)
                $(document).on("submit", "#form-product", function (e) {
                    e.preventDefault();
                    $.ajax({
                        type: $(this).attr("method"),
                        url: $(this).attr("action"),
                        data: $(this).serialize(),
                        dataType: "json",
                        success: function (response) {
                            $("tbody").html(response.data);
                            alert(response.message);
                            $("#modalProduct").modal("hide");
                        },
                        error: function (response) {
                            console.log(response);
                        },
                    });
                });
        
                // Filter function
                $("#filter-nama").on("input", function () {
                    var filterValue = $(this).val().toLowerCase();
                    $("tbody tr").filter(function () {
                        $(this).toggle($(this).text().toLowerCase().indexOf(filterValue) > -1);
                    });
                });
            });
        </script>
    </body>
</html>
